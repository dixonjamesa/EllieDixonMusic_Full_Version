<?php
$videolist = array();
$videothumbs = array();
$videonames = array();
$videoauthors = array();
$videotags = array(); // used for GA tags

function add_video($link, $thumb, $name, $author, $tag)
{
	global $videolist, $videothumbs, $videonames, $videoauthors, $videotags;

	$videolist[] = $link;
	$videothumbs[] = $thumb;
	$videonames[] = $name;
	$videoauthors[] = $author;
	$videotags[] = $tag;
}

/* original */
add_video("B1L-D9RmC9I", "freak.jpg", "Freak", "Ellie Dixon", "Freak");
add_video("qaatSwJVnvc", "takemehome.jpg", "Take Me Home", "Ellie Dixon", "Home");
add_video("DnyZZgCbTxs", "falsefires.jpg", "False Fires", "Ellie Dixon", "Fires");
add_video("P5CIetPkhpk", "headingeast.jpg", "Heading East", "Ellie Dixon", "HEast");
add_video("q2NvBgiGxw8", "replay.jpg", "Replay", "Ellie Dixon", "Replay");
/* DIY */
add_video("KxO3K8yskls", "lushlife.jpg", "Lush Life", "Zara Larsson", "Lush");
add_video("ENbVo-HTsgY", "cheapthrills.jpg", "Cheap Thrills", "Sia", "Thrills");
/* Collabs */
add_video("yYW21-borlw", "", "Uptown Funk", "Bruno Mars", "UptownFunk");
add_video("ekoBO-TuBPw", "", "All Star", "Smashmouth", "AllStar");
add_video("JCGcEBc8-Ss", "", "Nothing Arrived", "Villagers", "Nothing");
add_video("ssdyPMlcWVg", "", "Breezeblocks", "Alt-J", "Breeze");
/* Covers */
add_video("XoG6vvGqwNg", "dancetothis.jpg", "Dance To This", "Troye Sivan & Ariana Grande", "DanceToThis");
add_video("Aicmc1Dmt8c", "palosanto.jpg", "Palo Santo", "years & Years", "PaloSanto");
add_video("35rWWk11pHA", "", "Redbone", "Childish Gambino", "Redbone");
add_video("JLQo4YXZ6dg", "", "Mercy", "Shawn Mendes", "Mercy");
add_video("7qt67SLrsAM", "", "Hometown Glory", "Adele", "Hometown");
add_video("lpuCh8AXc28", "", "Dancing on my Own", "Robyn", "Dancing");
add_video("mxsM-pW8XNI", "", "Elastic Heart", "Sia", "Elastic");
add_video("lharlGvaJNM", "", "Everybody Wants to Rule the World", "Tears for Fears", "RuleWorld");
add_video("DwFOzSO1xYc", "", "Left Hand Free", "Alt-J", "LeftHand");
add_video("W3usHpl5as0", "", "Can't feel my Face", "The Weeknd", "Weeknd");
add_video("1bzGV6wJw5c", "", "Sorry", "Justin Bieber", "Sorry");
add_video("dlOuKLaL-5g", "", "I Need a Dollar", "Aloe Black", "Dollar");
add_video("rfn184Pyp_A", "", "Rather Be", "Clean Bandit", "RatherBe");
add_video("Y_CLRTFYkz0", "", "White Christmas", "Irving Berlin", "WhiteC");

$videonumber = -1;
?>
		<div class="container-fluid" style="padding:20px;">
		<div class="video" style="width:60%;margin:0 auto;">
			<div class="videoWrapper" >
				<div id="ytplayer">
					<!-- script code inserts video here -->
				</div>
			</div>
		</div>

			<h1 class="title">
				Originals
			</h1>
				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				</div>
				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				</div>
				<h1 class="title">
					DIY Covers
				</h1>
				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>

			  	</div>
					<h1 class="title">
						Collabs
					</h1>

					<div class="row">

					  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
					  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
					  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>

				  	</div>


				<h1 class="title">
					Covers
				</h1>

				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				</div>
				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				</div>
				<div class="row">
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				  <div class="col-sm-4 vidspace"><?php $videonumber++; include 'video.html';?></div>
				</div>
		</div>

<!-- Youtube video player -->
<script>
    // Load the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // This function creates an <iframe> (and YouTube player)
    // after the API code downloads.
	
    var player;
	
	function changevideo(newvid)
	{
		player.loadVideoById(newvid);
	}
	function onYouTubeIframeAPIReady() 
	{
		player = new YT.Player(
			'ytplayer', 
			{height: '100%', width: '100%', videoId: '<?php echo $videolist[0]?>',
				playerVars: { 
					autoplay: 1,
                    loop: 0,
                    controls: 0,
                    showinfo: 0,
                    modestbranding: 1,
                    vq: 'hd1080'},
				events: {'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange}
			});
    }

	// The API will call this function when the video player is ready.
	function onPlayerReady(event)
	{
		event.target.playVideo();
	}

	var playingVid = -1;
// state change callbacks - one for each video:
	function onPlayerStateChange(event)
	{ 
		onStateChangeGeneric(event,'<?php echo $videotags[0]?>', player );
	}

	function onStateChangeGeneric(event, ids, playr)
	{
		// track when user clicks to Play
		if (event.data == YT.PlayerState.PLAYING) {
			if( playingVid != -1 )
			{
				// pause the current playing video first...
				playingVid.pauseVideo();
				//console.log("autopause");
			}
			ga('send', 'event', 'Video', 'Play', ids);
			playingVid = playr;
			//console.log("play");
		}
		// track when user clicks to Pause
		if (event.data == YT.PlayerState.PAUSED && playingVid != -1) {
			ga('send', 'event', 'Video', 'Pause', ids);
			if(playingVid == playr) playingVid = -1;
		}
		// track when video ends
		if (event.data == YT.PlayerState.ENDED) {
			ga('send', 'event', 'Video', 'Finished', ids);
			playingVid = -1;
		}
	}
</script>
